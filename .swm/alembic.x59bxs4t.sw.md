---
id: x59bxs4t
title: alembic
file_version: 1.1.3
app_version: 1.16.4
---

# Alembic Revision

Run in `ichrisbirch/ichrisbirch` (where `alembic.ini` is located)

## First Run

```
export ENVIRONMENT='development' # or 'production'
alembic revision --autogenerate -m 'Create initial tables'
alembic upgrade head
```

## Subsequent Runs

1.  Make the changes to the models and schemas

2.  Run a revision to pickup changes in code `alembic revision --autogenerate -m 'Add notes field to tasks table'`

    > **Note**<br/>
    > If this doesn't work perfectly, you must edit the revision file

3.  Run the upgrade in the environments

!!! note "Locally" `bash export ENVIRONMENT='development' alembic upgrade head`

!!! info "EC2" `bash export ENVIRONMENT='production' alembic upgrade head`

## Troubleshooting

!!! failure "Error" Alembic is not able to upgrade to the latest because the revisions got out of sync.

```
!!! success "Solution"
    Find the last revision that was successfully run (manually by inspecting the database) and then run:
    `alembic stamp <revision>` to set the current revision to the last successful one.
    Then run the upgrade again:
    `alembic upgrade head`
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBaWNocmlzYmlyY2glM0ElM0FkYXRhcG9pbnRjaHJpcw==/docs/x59bxs4t).
